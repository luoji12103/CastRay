# CastRay å¤–éƒ¨é›†ç¾¤å‘ç°åŠŸèƒ½ - å®ç”¨æ‰‹å†Œ

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

CastRay ç°å·²æ”¯æŒå‘ç°å’Œè¿æ¥å…¶ä»–è¿›ç¨‹åˆ›å»ºçš„ Ray é›†ç¾¤ï¼Œå°†å¤–éƒ¨ Ray èŠ‚ç‚¹æ— ç¼é›†æˆåˆ°å½“å‰ç³»ç»Ÿä¸­ã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- âœ… **è‡ªåŠ¨å‘ç°**: æ‰«ææœ¬åœ°è¿è¡Œçš„ Ray é›†ç¾¤
- âœ… **æ™ºèƒ½è¿æ¥**: å¤šç§æ–¹å¼è¿æ¥å¤–éƒ¨é›†ç¾¤  
- âœ… **èŠ‚ç‚¹è™šæ‹ŸåŒ–**: å¤–éƒ¨èŠ‚ç‚¹æ˜¾ç¤ºä¸ºç³»ç»ŸèŠ‚ç‚¹
- âœ… **å®æ—¶ç›‘æ§**: WebSocket å®æ—¶çŠ¶æ€æ›´æ–°
- âœ… **API å®Œæ•´**: å…¨å¥— RESTful ç®¡ç†æ¥å£

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ç¯å¢ƒ
```bash
# æ¿€æ´» CastRay ç¯å¢ƒ
conda activate castray

# åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•
cd "d:\MyUser\HKUSTGZ\DOIT\6G Program\CastRay"
```

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ Ray é›†ç¾¤
åœ¨**æ–°ç»ˆç«¯**ä¸­è¿è¡Œï¼š
```bash
ray start --head --dashboard-port=8265
```

éªŒè¯é›†ç¾¤è¿è¡Œï¼š
```bash
ray status
```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨ CastRay
åœ¨**ä¸»ç»ˆç«¯**ä¸­è¿è¡Œï¼š
```bash
python main.py
```

ç­‰å¾…çœ‹åˆ°æœåŠ¡å¯åŠ¨ä¿¡æ¯ï¼š
```
INFO: Uvicorn running on http://0.0.0.0:8000
```

### ç¬¬å››æ­¥ï¼šå‘ç°å¤–éƒ¨é›†ç¾¤
ä½¿ç”¨ API å‘ç°é›†ç¾¤ï¼š
```bash
curl -X POST http://localhost:8000/api/cluster/discover-external
```

æˆ–è¿è¡Œæ¼”ç¤ºè„šæœ¬ï¼š
```bash
python demo_external_cluster.py
```

## ğŸ” éªŒè¯åŠŸèƒ½

### 1. æ£€æŸ¥å¤–éƒ¨é›†ç¾¤è¿æ¥çŠ¶æ€
```bash
curl http://localhost:8000/api/cluster/external-info
```

æœŸæœ›å“åº”ï¼š
```json
{
  "is_connected": true,
  "external_nodes": {...},
  "connected_cluster": "127.0.0.1:8265"
}
```

### 2. æŸ¥çœ‹å¤–éƒ¨èŠ‚ç‚¹åˆ—è¡¨
```bash
curl http://localhost:8000/api/nodes/external
```

### 3. æŸ¥çœ‹ç³»ç»Ÿæ•´ä½“çŠ¶æ€
```bash
curl http://localhost:8000/api/status
```
å¤–éƒ¨èŠ‚ç‚¹ç°åœ¨ä¼šæ˜¾ç¤ºåœ¨æ€»èŠ‚ç‚¹åˆ—è¡¨ä¸­ã€‚

## ğŸŒ Web ç•Œé¢ä½¿ç”¨

1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8000/ui`
2. æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨ï¼ˆåŒ…å«å¤–éƒ¨èŠ‚ç‚¹ï¼‰
3. ç‚¹å‡»ç›¸å…³æŒ‰é’®è¿›è¡Œé›†ç¾¤ç®¡ç†

## ğŸ“¡ å¯ç”¨ API

| ç«¯ç‚¹ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/cluster/discover-external` | POST | è‡ªåŠ¨å‘ç°å¤–éƒ¨é›†ç¾¤ |
| `/api/cluster/external-info` | GET | å¤–éƒ¨é›†ç¾¤çŠ¶æ€ |
| `/api/nodes/external` | GET | å¤–éƒ¨èŠ‚ç‚¹åˆ—è¡¨ |
| `/api/cluster/connect-external` | POST | æ‰‹åŠ¨è¿æ¥é›†ç¾¤ |
| `/api/cluster/disconnect-external` | DELETE | æ–­å¼€å¤–éƒ¨é›†ç¾¤ |

### æ‰‹åŠ¨è¿æ¥ç¤ºä¾‹
```bash
curl -X POST http://localhost:8000/api/cluster/connect-external \
  -H "Content-Type: application/json" \
  -d '{"cluster_address": "127.0.0.1:8265"}'
```

## ğŸ”§ å¸¸ç”¨æ“ä½œ

### é‡æ–°å‘ç°é›†ç¾¤
```bash
# å…ˆæ–­å¼€å½“å‰è¿æ¥
curl -X DELETE http://localhost:8000/api/cluster/disconnect-external

# é‡æ–°å‘ç°
curl -X POST http://localhost:8000/api/cluster/discover-external
```

### æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶æ€
```bash
# Ray é›†ç¾¤çŠ¶æ€
ray status

# CastRay ä¸­çš„å¤–éƒ¨é›†ç¾¤çŠ¶æ€
curl http://localhost:8000/api/cluster/external-info
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ— æ³•å‘ç°å¤–éƒ¨é›†ç¾¤

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ Ray é›†ç¾¤æ­£åœ¨è¿è¡Œï¼š`ray status`
2. æ£€æŸ¥ Dashboard å¯è®¿é—®ï¼š`curl http://localhost:8265`
3. æ£€æŸ¥ç«¯å£å ç”¨ï¼š`netstat -an | findstr 8265`

### é—®é¢˜ï¼šè¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. éªŒè¯ GCS ç«¯å£å¯è¾¾ï¼š`telnet 127.0.0.1 10001`
2. æ£€æŸ¥ Ray ç‰ˆæœ¬å…¼å®¹æ€§ï¼š`ray --version`
3. é‡å¯ Ray é›†ç¾¤å¹¶é‡è¯•

### é—®é¢˜ï¼šå¤–éƒ¨èŠ‚ç‚¹ä¸æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ Ray é›†ç¾¤æœ‰æ´»è·ƒèŠ‚ç‚¹ï¼š`ray status`
2. é‡æ–°è¿æ¥é›†ç¾¤
3. æ£€æŸ¥ç³»ç»Ÿæ—¥å¿—

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å¯åŠ¨é¡ºåº**ï¼šå…ˆå¯åŠ¨ Ray é›†ç¾¤ï¼Œå†å¯åŠ¨ CastRay
2. **ç›‘æ§**ï¼šå®šæœŸæ£€æŸ¥å¤–éƒ¨é›†ç¾¤è¿æ¥çŠ¶æ€
3. **æ€§èƒ½**ï¼šé¿å…é¢‘ç¹è°ƒç”¨è‡ªåŠ¨å‘ç° API
4. **å®‰å…¨**ï¼šä»…åœ¨å—ä¿¡ä»»çš„ç½‘ç»œç¯å¢ƒä¸­ä½¿ç”¨

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- å®Œæ•´æ•™ç¨‹ï¼š`USAGE_TUTORIAL.md`
- å®ç°æ€»ç»“ï¼š`IMPLEMENTATION_SUMMARY.md`
- æŠ€æœ¯è¯´æ˜ï¼š`README_EXTERNAL_CLUSTERS.md`

## ğŸ‰ æˆåŠŸæŒ‡æ ‡

âœ… èƒ½å¤Ÿå‘ç°å¤–éƒ¨ Ray é›†ç¾¤  
âœ… å¤–éƒ¨èŠ‚ç‚¹æ˜¾ç¤ºåœ¨ç³»ç»Ÿä¸­  
âœ… API è°ƒç”¨æ­£å¸¸å“åº”  
âœ… Web ç•Œé¢æ˜¾ç¤ºå¤–éƒ¨èŠ‚ç‚¹  

---

**ğŸš€ ç°åœ¨æ‚¨å¯ä»¥å……åˆ†åˆ©ç”¨å¤šä¸ª Ray é›†ç¾¤çš„èµ„æºè¿›è¡Œåˆ†å¸ƒå¼æ–‡ä»¶ä¼ è¾“äº†ï¼**
