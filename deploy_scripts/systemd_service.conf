[Unit]
Description=CastRay Distributed File Transfer System
After=network.target
Requires=network.target

[Service]
Type=simple
User=castray
Group=castray
WorkingDirectory=/opt/castray-system
ExecStart=/opt/castray-system/deploy_scripts/start_service.sh
Restart=always
RestartSec=10
Environment=RAY_ADDRESS=auto
Environment=PYTHONPATH=/opt/castray-system
Environment=CASTRAY_CONFIG=/opt/castray-system/config_linux.json

# 日志配置
StandardOutput=journal
StandardError=journal
SyslogIdentifier=castray

# 安全配置
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ReadWritePaths=/opt/castray-system

[Install]
WantedBy=multi-user.target
